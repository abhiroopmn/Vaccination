<div class="employee-details" *ngIf="details?.length !== 0">
  <div>Employee ID: </div><div>{{details[0] ? details[0]['Empl ID'] : ''}}</div>
  <div>Email: </div><div>{{details[0] ? details[0]['Email ID'] : ''}}</div>
  <div>Employee Name: </div><div>{{details[0] ? details[0]['Employee Name'] : ''}}</div>
</div>

<div class="display-section">
  <p-table [value]="details" *ngIf="details?.length !== 0" [(selection)]="vaccinatedEmployees" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)" dataKey="Token">
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 5rem">Expand Row</th>
        <th style="width: 6rem">Reported</th>
        <th style="width: 10rem">Slot Start</th>
        <th style="width: 10rem">Slot End</th>
        <th style="width: 6rem">Token</th>
        <th>Name in Co-WIN</th>
        <th style="width: 10rem">Last 4 Digits of Co-WIN Ref ID</th>
        <th>Co-WIN Regd. Mobile #</th>
        <th>Photo ID</th>
        <th style="width: 10rem">Last 4 of Photo ID</th>
        <th>Dose</th>
<!--        <ng-container *ngFor="let header of headers">-->
<!--          <th *ngIf="!headersToBeExcluded.includes(header)">{{header}}</th>-->
<!--        </ng-container>-->
<!--        <th>Dose 1 Date</th>-->
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-detail let-expanded="expanded">
      <tr [class.selected]="vaccinatedEmployees | includes: detail">
        <td>
          <button type="button" pButton pRipple [pRowToggler]="detail" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
        </td>
        <td class="center-align">
          <p-tableCheckbox [value]="detail"></p-tableCheckbox>
        </td>
        <td>{{detail['Slot Start'] | format: 'Slot Start'}}</td>
        <td>{{detail['Slot End'] | format: 'Slot End'}}</td>
        <td>{{detail['Token'] | format: 'Token'}}</td>
        <td>{{detail['Name in Co-WIN']}}</td>
        <td>{{detail['Last 4 Digits of Co-WIN Ref ID'] | format: 'Last 4 Digits of Co-WIN Ref ID'}}</td>
        <td>{{detail['Co-WIN Regd. Mobile #']}}</td>
        <td>{{detail['Photo ID']}}</td>
        <td>{{detail['Last 4 of Photo ID'] | format: 'Last 4 of Photo ID'}}</td>
        <td>{{detail['Dose']}}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="rowexpansion" let-detail>
      <tr>
        <td colspan="2"></td>
        <td colspan="9" class="expanded-details">
          <div>
            <div>Darwin Dependent Type: </div>
            <div>{{detail['Darwin Dependent Type']}}</div>
          </div>
          <div>
            <div>Darwin Name: </div>
            <div>{{detail['Darwin Name']}}</div>
          </div>
          <div>
            <div>Darwin DOB:</div>
            <div>{{detail['Darwin DOB'] | format: 'Darwin DOB'}}</div>
          </div>
          <div>
            <div>Darwin Gender:</div>
            <div>{{detail['Darwin Gender'] | format: 'Darwin Gender'}}</div>
          </div>
          <div>
            <div>Dose 1 Date:</div>
            <div>{{detail['Dose 1 Date'] | format: 'Dose 1 Date'}}</div>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="print-container">
  <ng-container *ngFor="let detail of details">
    <div class="person" *ngIf="vaccinatedEmployees | includes : detail">
        <ng-container *ngFor="let header of headers">
          <div class="person-details" *ngIf="!headersToBeExcluded.includes(header)">
            <div><strong>{{header}}:</strong></div>
            <div>{{detail[header] | format : header}}</div>
          </div>
        </ng-container>
        <div class="person-details">
          <div><strong>Dose 1 Date:</strong></div>
          <div>{{detail['Dose 1 Date'] | format: 'Dose 1 Date'}}</div>
        </div>
    </div>
  </ng-container>
</div>
